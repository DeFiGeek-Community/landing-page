+++
author = ""
date = 2023-05-01T15:00:00Z
excerpt = ""
image = "/images/blog/DFGC_logo_banner_black.webp"
image_alt = ""
layout = "post"
subtitle = ""
tags = "コミュニティブログ"
thumb_image = "/images/blog/DFGC_logo_banner_black.webp"
thumb_image_alt = ""
title = "マークルディストリビューター PoC 概要"
[seo]
description = ""
extra = []
title = ""

+++

# 概要

マークルディストリビューターとは、Merkle-tree を用いた Claim 型エアドロッププラットフォームです。

マークルツリーファイル（エアドロ情報を格納）の作成、エアドロ情報のオンチェーン登録、対象ユーザーの請求をすべてこのサイトで行うことができます。

# テスト概要

Goerli テストネットワークへのコントラクトデプロイと UI の検証環境立ち上げでテストを行います。

テスト環境には以下の URL でアクセスできます。

UI：[https://merkle-airdrop-tool.vercel.app/](https://merkle-airdrop-tool.vercel.app/)

コントラクト(Goerli)：[0xF2c88E73659dE5545d03E6025526360650F0F19c](https://goerli.etherscan.io/address/0xF2c88E73659dE5545d03E6025526360650F0F19c)

PoC では以下の機能を実装しています。

UI・UX の改善案は DFGC サーバーの[マークルディストリビューター ama チャンネル](https://discord.com/channels/705052448418693180/1102226861330804766)に書き込みください。

# 機能説明

## マークルツリーファイルの作成

マークルツリーファイルは 2 通りの方法で作成できます。

作成したマークルツリーファイルはエアドロップ情報の登録とユーザーの請求に利用されます。

このサイトでは作成されたマークルツリーファイルを保存しないので、各自が保存し、紛失しないようにしてください。

### マニュアル

1 つめの方法はマニュアルです。

エアドロップ対象のアドレスと数量をカンマ区切りで入力できます。

入力した内容でマークルツリーファイルが作成されます。

### スナップショット

2 つめの方法はスナップショットです。

特定のブロックナンバーにおける任意のトークンの保有割合を基に、配布予定のトークン数量が対象者に割り当てられます。

除外アドレスを入力することが可能です。

## エアドロップ情報の登録

作成したマークルツリーファイルをもとにエアドロップ情報をオンチェーンに登録します。

エアドロップは名称によって一意になることが要求されます（登録時にチェックされます）。

### 登録手数料

名称のむやみな取得を防ぐために、エアドロップ情報の登録時に 0.01ETH が徴収されます。

高く見えるかもしれませんが、これを回収する方法があります。

エアドロ請求者はエアドロを請求する際にエアドロ登録者に手数料として 0.0001ETH を支払います。

つまり、100 人以上にエアドロを請求してもらえば手数料は実質無料になり、それ以降の手数料は収益となります。

たくさんの人に配布し、請求してもらいましょう！

### Permit2 による送金

入金額が 0 より大きい場合、登録と同時にエアドロトークンが転送されます。

この転送は Uniswap の Permit2 を使用しています。初めて Permit2 を使用する場合、Approve トランザクションが発行されます。

その後、送金の署名とトランザクション発行が求められます。

入金額を 0 にした場合、エアドロップ情報のみ登録されます。後で入金することも可能です（同様に Permit2 を利用）。

## エアドロップの請求

登録されたエアドロップは、対象者が請求することができます。

エアドロップ名と、ホストされている merkle-tree ファイルのアドレスを入力してください。
(それぞれを URL のパラメータとしてリダイレクトすると便利です)

手数料として、エアドロップ登録者とプラットフォームはそれぞれ 0.0001ETH（合計 0.0002ETH）を徴収します。
